<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Shell-4 | Escher</title>
  <meta name="description" content="Shell好用的工具： cut介绍cut  译为“剪切, 切割”  ,  是一个强大文本处理工具，它可以将文本按列进行划分的文本处理。cut命令逐行读入文本，然后按列划分字段并进行提取、输出等操作。 语法1cut [options]  filename  options参数说明    选项参数 功能    -f 提取范围 列号，获取第几列   -d 自定义分隔符 自定义分隔符，默认为制表符。">
<meta property="og:type" content="article">
<meta property="og:title" content="Shell-4">
<meta property="og:url" content="http://liujun1997.github.io/2021/09/04/shell-4/index.html">
<meta property="og:site_name" content="Escher">
<meta property="og:description" content="Shell好用的工具： cut介绍cut  译为“剪切, 切割”  ,  是一个强大文本处理工具，它可以将文本按列进行划分的文本处理。cut命令逐行读入文本，然后按列划分字段并进行提取、输出等操作。 语法1cut [options]  filename  options参数说明    选项参数 功能    -f 提取范围 列号，获取第几列   -d 自定义分隔符 自定义分隔符，默认为制表符。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200707230710596.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200707232926482.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200707233024564.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200709220852618.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711142437017.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711142653293.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711143324756.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711143438631.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711143706340.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711143754196.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711143926461.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711144139142.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200708003059162.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711120636232.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711115310554.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711095515087.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710000018446.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710000824539.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710000117275.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710001012028.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710000330765.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710001219163.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710165604688.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711112046339.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710170036140.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710170338110.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710171410645.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710173137962.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710173601573.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710174149348.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710174655691.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711105205862.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710110433788.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710110651523.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710111014651.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710154359291.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710154642832.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710154829235.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710161127555.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710162013813.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200710164435499.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711111533278.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711113348831.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711113226364.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711105707546.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711103556835.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711103901519.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711104451987.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711104856968.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711095724616.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711095844232.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200712145458252.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711163917949.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711164512294.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711165433352.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711170720468.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711171311183.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711171918200.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711172121503.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711172417497.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711173518580.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711173734821.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711174827654.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711181845642.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711213649299.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711215839824.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200711220230406.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200712085616584.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713012421583.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713012712536.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713012900639.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713013216947.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713013821197.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713081907537.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713082237986.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713082603013.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713083045742.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713083912322.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713085107848.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713091236973.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713092318381.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713093129265.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713101959074.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713101616727.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713101521632.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713021841637.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713021609950.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713032753334.png">
<meta property="og:image" content="https://file.coderstudy.cn/image/Pic/image-20200713032458346.png">
<meta property="article:published_time" content="2021-09-04T12:34:53.000Z">
<meta property="article:modified_time" content="2021-09-05T05:08:56.000Z">
<meta property="article:author" content="Escher">
<meta property="article:tag" content="Linux Shell">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://file.coderstudy.cn/image/Pic/image-20200707230710596.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://liujun1997.github.io/2021/09/04/shell-4/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Escher" type="application/atom+xml">
  
  
    <link rel="icon" href="./images/log.jpg" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
    <link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet">
  
  
<meta name="generator" content="Hexo 5.4.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/liujun1997" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar1.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Escher</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Java,Python,Coder</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> ZhuHai, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/liujun1997" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://weibo.com/流隽jk" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>本人是一个JAVA开发工程师，这里是我的技术分享，生活随笔的空间，欢迎光临呀，希望可以在技术上多多交流！</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/">树莓派</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%89%A9%E8%81%94%E7%BD%91/">物联网</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/">软件安装</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a><span class="category-list-count">6</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/IOT-chieflinks/" style="font-size: 13px;">IOT chieflinks</a> <a href="/tags/Java/" style="font-size: 13px;">Java</a> <a href="/tags/Linux/" style="font-size: 13.5px;">Linux</a> <a href="/tags/Linux-Shell/" style="font-size: 14px;">Linux Shell</a> <a href="/tags/Linux-%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/" style="font-size: 13px;">Linux 磁盘分区</a> <a href="/tags/Mysql-Linux/" style="font-size: 13px;">Mysql Linux</a> <a href="/tags/mysql/" style="font-size: 13px;">mysql</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 13px;">大数据</a> <a href="/tags/%E6%A0%91%E8%8E%93%E6%B4%BE-%E7%BD%91%E7%BB%9C/" style="font-size: 13px;">树莓派 网络</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
              </p>
              <p class="item-title">
                <a href="/2021/12/15/Mysql%E5%87%BD%E6%95%B0/" class="title">Mysql常用函数</a>
              </p>
              <p class="item-date">
                <time datetime="2021-12-15T13:19:57.000Z" itemprop="datePublished">2021-12-15</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/">软件安装</a>
              </p>
              <p class="item-title">
                <a href="/2021/10/13/Centos7-Mysql5-7%E5%AE%89%E8%A3%85/" class="title">Centos7-Mysql5.7安装</a>
              </p>
              <p class="item-date">
                <time datetime="2021-10-13T07:59:26.000Z" itemprop="datePublished">2021-10-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a>
              </p>
              <p class="item-title">
                <a href="/2021/10/11/Linux%E7%A3%81%E7%9B%98-%E5%88%86%E5%8C%BA-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" class="title">Linux磁盘/分区/文件系统</a>
              </p>
              <p class="item-date">
                <time datetime="2021-10-11T08:59:47.000Z" itemprop="datePublished">2021-10-11</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a>
              </p>
              <p class="item-title">
                <a href="/2021/09/04/shell-4/" class="title">Shell-4</a>
              </p>
              <p class="item-date">
                <time datetime="2021-09-04T12:34:53.000Z" itemprop="datePublished">2021-09-04</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a>
              </p>
              <p class="item-title">
                <a href="/2021/09/04/Shell-3/" class="title">Shell-3</a>
              </p>
              <p class="item-date">
                <time datetime="2021-09-04T11:39:55.000Z" itemprop="datePublished">2021-09-04</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell%E5%A5%BD%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%EF%BC%9A-cut"><span class="toc-number">1.</span> <span class="toc-text">Shell好用的工具： cut</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%88%87%E5%89%B2%E6%8F%90%E5%8F%96%E6%8C%87%E5%AE%9A%E5%88%97%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.</span> <span class="toc-text">示例：切割提取指定列数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E5%88%87%E5%89%B2%E6%8F%90%E5%8F%96%E6%8C%87%E5%AE%9A%E5%AD%97%E7%AC%A6%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.</span> <span class="toc-text">示例: 切割提取指定字符数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%88%87%E5%89%B2%E6%8F%90%E5%8F%96%E6%8C%87%E5%AE%9A%E5%AD%97%E8%8A%82%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.</span> <span class="toc-text">示例：切割提取指定字节数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%88%87%E5%89%B2%E6%8F%90%E5%8F%96%E6%8C%87%E5%AE%9A%E5%8D%95%E8%AF%8D%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.</span> <span class="toc-text">示例：切割提取指定单词数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%88%87%E5%89%B2%E6%8F%90%E5%8F%96bash%E8%BF%9B%E7%A8%8B%E7%9A%84PID%E5%8F%B7"><span class="toc-number">1.7.</span> <span class="toc-text">示例：切割提取bash进程的PID号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%88%87%E5%89%B2%E6%8F%90%E5%8F%96IP%E5%9C%B0%E5%9D%80"><span class="toc-number">1.8.</span> <span class="toc-text">示例：切割提取IP地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.9.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell%E5%A5%BD%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%EF%BC%9Ased"><span class="toc-number">2.</span> <span class="toc-text">Shell好用的工具：sed</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87"><span class="toc-number">2.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">2.2.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%8E%9F%E7%90%86"><span class="toc-number">2.3.</span> <span class="toc-text">sed处理数据原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-1"><span class="toc-number">2.4.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87"><span class="toc-number">2.5.</span> <span class="toc-text">数据准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E5%90%91%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">2.6.</span> <span class="toc-text">示例：向文件中添加数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E6%8C%87%E5%AE%9A%E8%A1%8C%E5%8F%B7%E7%9A%84%E5%89%8D%E6%88%96%E5%90%8E%E9%9D%A2%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">2.6.1.</span> <span class="toc-text">演示1: 指定行号的前或后面添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E6%8C%87%E5%AE%9A%E5%86%85%E5%AE%B9%E5%89%8D%E6%88%96%E5%90%8E%E9%9D%A2%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">2.6.2.</span> <span class="toc-text">演示2: 指定内容前或后面添加数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-%E5%9C%A8%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%E5%89%8D%E6%88%96%E5%90%8E%E6%B7%BB%E5%8A%A0hello"><span class="toc-number">2.6.3.</span> <span class="toc-text">演示3: 在最后一行前或后添加hello</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">2.7.</span> <span class="toc-text">示例: 删除文件中的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E5%88%A0%E9%99%A4%E7%AC%AC2%E8%A1%8C"><span class="toc-number">2.7.1.</span> <span class="toc-text">演示1: 删除第2行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E5%88%A0%E9%99%A4%E5%A5%87%E6%95%B0%E8%A1%8C"><span class="toc-number">2.7.2.</span> <span class="toc-text">演示2: 删除奇数行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E7%9A%84%E5%A4%9A%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">2.7.3.</span> <span class="toc-text">演示3:  删除指定范围的多行数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-%E5%88%A0%E9%99%A4%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%8F%96%E5%8F%8D%E7%9A%84%E5%A4%9A%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">2.7.4.</span> <span class="toc-text">演示3:  删除指定范围取反的多行数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA4-%E5%88%A0%E9%99%A4%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C"><span class="toc-number">2.7.5.</span> <span class="toc-text">演示4: 删除最后一行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA5-%E5%88%A0%E9%99%A4%E5%8C%B9%E9%85%8Ditheima%E7%9A%84%E8%A1%8C"><span class="toc-number">2.7.6.</span> <span class="toc-text">演示5: 删除匹配itheima的行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA6-%E5%88%A0%E9%99%A4%E5%8C%B9%E9%85%8D%E8%A1%8C%E5%88%B0%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C"><span class="toc-number">2.7.7.</span> <span class="toc-text">演示6: 删除匹配行到最后一行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA7-%E5%88%A0%E9%99%A4%E5%8C%B9%E9%85%8D%E8%A1%8C%E5%8F%8A%E5%85%B6%E5%90%8E%E9%9D%A2%E4%B8%80%E8%A1%8C"><span class="toc-number">2.7.8.</span> <span class="toc-text">演示7: 删除匹配行及其后面一行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA9-%E5%88%A0%E9%99%A4%E4%B8%8D%E5%8C%B9%E9%85%8D%E7%9A%84%E8%A1%8C"><span class="toc-number">2.7.9.</span> <span class="toc-text">演示9: 删除不匹配的行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%9B%B4%E6%94%B9%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">2.8.</span> <span class="toc-text">示例：更改文件中的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E5%B0%86%E6%96%87%E4%BB%B6%E7%9A%84%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BF%AE%E6%94%B9%E4%B8%BAhello"><span class="toc-number">2.8.1.</span> <span class="toc-text">演示1:将文件的第一行修改为hello</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E5%B0%86%E5%8C%85%E5%90%ABitheima%E7%9A%84%E8%A1%8C%E4%BF%AE%E6%94%B9%E4%B8%BAhello"><span class="toc-number">2.8.2.</span> <span class="toc-text">演示2: 将包含itheima的行修改为hello</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-%E5%B0%86%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%E4%BF%AE%E6%94%B9%E4%B8%BAhello"><span class="toc-number">2.8.3.</span> <span class="toc-text">演示3: 将最后一行修改为hello</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA4-%E5%B0%86%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84itheima%E6%9B%BF%E6%8D%A2%E4%B8%BAhello"><span class="toc-number">2.8.4.</span> <span class="toc-text">演示4: 将文件中的itheima替换为hello</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA5-%E5%B0%86%E6%AF%8F%E8%A1%8C%E4%B8%AD%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8C%B9%E9%85%8D%E6%9B%BF%E6%8D%A2"><span class="toc-number">2.8.5.</span> <span class="toc-text">演示5: 将每行中第二个匹配替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA6-%E6%9B%BF%E6%8D%A2%E5%90%8E%E7%9A%84%E5%86%85%E5%AE%B9%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6"><span class="toc-number">2.8.6.</span> <span class="toc-text">演示6: 替换后的内容写入文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA7-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D%E6%9B%BF%E6%8D%A2"><span class="toc-number">2.8.7.</span> <span class="toc-text">演示7: 正则表达式匹配替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA8-%E6%AF%8F%E8%A1%8C%E6%9C%AB%E5%B0%BE%E6%8B%BC%E6%8E%A5test"><span class="toc-number">2.8.8.</span> <span class="toc-text">演示8: 每行末尾拼接test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA9-%E6%AF%8F%E8%A1%8C%E8%A1%8C%E9%A6%96%E6%B7%BB%E5%8A%A0%E6%B3%A8%E9%87%8A"><span class="toc-number">2.8.9.</span> <span class="toc-text">演示9: 每行行首添加注释 #</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%9F%A5%E8%AF%A2%E6%96%87%E4%BB%B6%E6%88%96%E7%AE%A1%E9%81%93%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">2.9.</span> <span class="toc-text">示例: 查询文件或管道中的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%821-%E6%9F%A5%E8%AF%A2%E5%90%AB%E6%9C%89-itcast-%E7%9A%84%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">2.9.1.</span> <span class="toc-text">需求1: 查询含有  itcast  的行数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%822-%E7%AE%A1%E9%81%93%E8%BF%87%E6%BB%A4%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.9.2.</span> <span class="toc-text">需求2: 管道过滤查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E5%A4%9A%E4%B8%AAsed%E7%A8%8B%E5%BA%8F%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C"><span class="toc-number">2.10.</span> <span class="toc-text">示例: 多个sed程序命令执行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95-%E7%BC%93%E5%AD%98%E5%8C%BA%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.11.</span> <span class="toc-text">sed高级用法: 缓存区数据交换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E7%A9%BA%E9%97%B4%E4%B8%8E%E6%9A%82%E5%AD%98%E7%A9%BA%E9%97%B4%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.11.1.</span> <span class="toc-text">模式空间与暂存空间介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E7%BC%93%E5%AD%98%E5%8C%BAsed%E7%A8%8B%E5%BA%A6%E5%91%BD%E4%BB%A4"><span class="toc-number">2.11.2.</span> <span class="toc-text">关于缓存区sed程度命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E7%BC%93%E5%AD%98%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2"><span class="toc-number">2.12.</span> <span class="toc-text">示例: 缓存空间数据交换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA1-%E7%AC%AC%E4%B8%80%E8%A1%8C%E7%B2%98%E8%B4%B4%E5%88%B0%E6%9C%80%E5%90%8E1%E8%A1%8C"><span class="toc-number">2.12.1.</span> <span class="toc-text">演示1: 第一行粘贴到最后1行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA2-%E7%AC%AC%E4%B8%80%E8%A1%8C%E5%88%A0%E9%99%A4%E5%90%8E%E7%B2%98%E8%B4%B4%E5%88%B0%E6%9C%80%E5%90%8E1%E8%A1%8C"><span class="toc-number">2.12.2.</span> <span class="toc-text">演示2: 第一行删除后粘贴到最后1行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA3-%E7%AC%AC%E4%B8%80%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E6%9B%BF%E6%8D%A2%E5%85%B6%E4%BB%96%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">2.12.3.</span> <span class="toc-text">演示3: 第一行数据复制粘贴替换其他行数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA4-%E5%B0%86%E5%89%8D3%E8%A1%8C%E6%95%B0%E6%8D%AE%E6%95%B0%E6%8D%AE%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4%E5%88%B0%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C"><span class="toc-number">2.12.4.</span> <span class="toc-text">演示4: 将前3行数据数据复制粘贴到最后一行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E7%BB%99%E6%AF%8F%E4%B8%80%E8%A1%8C%E6%B7%BB%E5%8A%A0%E7%A9%BA%E8%A1%8C"><span class="toc-number">2.13.</span> <span class="toc-text">示例: 给每一行添加空行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%E7%9A%84%E7%A9%BA%E8%A1%8C"><span class="toc-number">2.14.</span> <span class="toc-text">示例: 删除所有的空行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell%E5%A5%BD%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%EF%BC%9Aawk"><span class="toc-number">3.</span> <span class="toc-text">Shell好用的工具：awk</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-2"><span class="toc-number">3.1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="toc-number">3.2.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F"><span class="toc-number">3.3.</span> <span class="toc-text">awk内置变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87-1"><span class="toc-number">3.4.</span> <span class="toc-text">数据准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E9%BB%98%E8%AE%A4%E6%AF%8F%E8%A1%8C%E7%A9%BA%E6%A0%BC%E5%88%87%E5%89%B2%E6%95%B0%E6%8D%AE"><span class="toc-number">3.5.</span> <span class="toc-text">示例 : 默认每行空格切割数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%89%93%E5%8D%B0%E5%90%AB%E6%9C%89%E5%8C%B9%E9%85%8D%E4%BF%A1%E6%81%AF%E7%9A%84%E8%A1%8C"><span class="toc-number">3.6.</span> <span class="toc-text">示例: 打印含有匹配信息的行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%89%93%E5%8D%B0%E5%8C%B9%E9%85%8D%E8%A1%8C%E4%B8%AD%E7%AC%AC7%E5%88%97%E6%95%B0%E6%8D%AE"><span class="toc-number">3.7.</span> <span class="toc-text">示例: 打印匹配行中第7列数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%89%93%E5%8D%B0%E6%96%87%E4%BB%B6%E6%AF%8F%E8%A1%8C%E5%B1%9E%E6%80%A7%E4%BF%A1%E6%81%AF"><span class="toc-number">3.8.</span> <span class="toc-text">示例: 打印文件每行属性信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%89%93%E5%8D%B0%E7%AC%AC%E4%BA%8C%E8%A1%8C%E4%BF%A1%E6%81%AF"><span class="toc-number">3.9.</span> <span class="toc-text">示例: 打印第二行信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%9F%A5%E6%89%BE%E4%BB%A5c%E5%BC%80%E5%A4%B4%E7%9A%84%E8%B5%84%E6%BA%90"><span class="toc-number">3.10.</span> <span class="toc-text">示例: 查找以c开头的资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%89%93%E5%8D%B0%E7%AC%AC%E4%B8%80%E5%88%97"><span class="toc-number">3.11.</span> <span class="toc-text">示例: 打印第一列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%89%93%E5%8D%B0%E6%9C%80%E5%90%8E1%E5%88%97"><span class="toc-number">3.12.</span> <span class="toc-text">示例: 打印最后1列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%89%93%E5%8D%B0%E5%80%92%E6%95%B0%E7%AC%AC%E4%BA%8C%E5%88%97"><span class="toc-number">3.13.</span> <span class="toc-text">示例: 打印倒数第二列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%89%93%E5%8D%B010%E5%88%B020%E8%A1%8C%E7%9A%84%E7%AC%AC%E4%B8%80%E5%88%97"><span class="toc-number">3.14.</span> <span class="toc-text">示例: 打印10到20行的第一列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E5%A4%9A%E5%88%86%E9%9A%94%E7%AC%A6%E4%BD%BF%E7%94%A8"><span class="toc-number">3.15.</span> <span class="toc-text">示例: 多分隔符使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%B7%BB%E5%8A%A0%E5%BC%80%E5%A7%8B%E4%B8%8E%E7%BB%93%E6%9D%9F%E5%86%85%E5%AE%B9"><span class="toc-number">3.16.</span> <span class="toc-text">示例: 添加开始与结束内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E4%BD%BF%E7%94%A8%E5%BE%AA%E7%8E%AF%E6%8B%BC%E6%8E%A5%E5%88%86%E5%89%B2%E5%90%8E%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">3.17.</span> <span class="toc-text">示例 : 使用循环拼接分割后的字符串</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%93%8D%E4%BD%9C%E6%8C%87%E5%AE%9A%E6%95%B0%E5%AD%97%E8%BF%90%E7%AE%97"><span class="toc-number">3.18.</span> <span class="toc-text">示例: 操作指定数字运算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E5%88%87%E5%89%B2ip"><span class="toc-number">3.19.</span> <span class="toc-text">示例: 切割ip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-%E6%98%BE%E7%A4%BA%E7%A9%BA%E8%A1%8C%E8%A1%8C%E5%8F%B7"><span class="toc-number">3.20.</span> <span class="toc-text">示例: 显示空行行号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-1"><span class="toc-number">3.21.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Shell%E5%A5%BD%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%EF%BC%9Asort"><span class="toc-number">4.</span> <span class="toc-text">Shell好用的工具：sort</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87-1"><span class="toc-number">4.1.</span> <span class="toc-text">目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-3"><span class="toc-number">4.2.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-3"><span class="toc-number">4.3.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87-2"><span class="toc-number">4.4.</span> <span class="toc-text">数据准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B1-%E6%95%B0%E5%AD%97%E5%8D%87%E5%BA%8F"><span class="toc-number">4.5.</span> <span class="toc-text">示例1: 数字升序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B2-%E6%95%B0%E5%AD%97%E5%8D%87%E5%BA%8F%E5%8E%BB%E9%87%8D"><span class="toc-number">4.6.</span> <span class="toc-text">示例2: 数字升序去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B3-%E6%95%B0%E5%AD%97%E5%8D%87%E5%BA%8F%E5%8E%BB%E9%87%8D%E7%BB%93%E6%9E%9C%E4%BF%9D%E5%AD%98%E5%88%B0%E6%96%87%E4%BB%B6"><span class="toc-number">4.7.</span> <span class="toc-text">示例3: 数字升序去重结果保存到文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B4-%E6%95%B0%E5%AD%97%E9%99%8D%E5%BA%8F%E5%8E%BB%E9%87%8D"><span class="toc-number">4.8.</span> <span class="toc-text">示例4: 数字降序去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B5-%E5%A4%9A%E5%88%97%E6%8E%92%E5%BA%8F"><span class="toc-number">4.9.</span> <span class="toc-text">示例5: 多列排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93-2"><span class="toc-number">4.10.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%9F%A5%E7%A9%BA%E8%A1%8C"><span class="toc-number">5.</span> <span class="toc-text">面试题：查空行</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%B1%82%E4%B8%80%E5%88%97%E7%9A%84%E5%92%8C"><span class="toc-number">6.</span> <span class="toc-text">面试题：求一列的和</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%A3%80%E6%9F%A5%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-number">7.</span> <span class="toc-text">面试题：检查文件是否存在</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%95%B0%E5%AD%97%E6%8E%92%E5%BA%8F"><span class="toc-number">8.</span> <span class="toc-text">面试题：数字排序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%90%9C%E7%B4%A2%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-number">9.</span> <span class="toc-text">面试题：搜索指定目录下文件内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%89%B9%E9%87%8F%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6%E5%90%8D"><span class="toc-number">10.</span> <span class="toc-text">面试题：批量生成文件名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%89%B9%E9%87%8F%E6%94%B9%E5%90%8D"><span class="toc-number">11.</span> <span class="toc-text">面试题：批量改名</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">12.</span> <span class="toc-text">面试题：批量创建用户</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E7%AD%9B%E9%80%89%E5%8D%95%E8%AF%8D"><span class="toc-number">13.</span> <span class="toc-text">面试题：筛选单词</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E5%8D%95%E8%AF%8D%E5%8F%8A%E5%AD%97%E6%AF%8D%E5%8E%BB%E9%87%8D%E6%8E%92%E5%BA%8F"><span class="toc-number">14.</span> <span class="toc-text">面试题：单词及字母去重排序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A%E6%89%AB%E6%8F%8F%E7%BD%91%E7%BB%9C%E5%86%85%E5%AD%98%E6%B4%BB%E4%B8%BB%E6%9C%BA"><span class="toc-number">15.</span> <span class="toc-text">面试题：扫描网络内存活主机</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9AMySQL%E5%88%86%E5%BA%93%E5%A4%87%E4%BB%BD"><span class="toc-number">16.</span> <span class="toc-text">面试题：MySQL分库备份</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9AMySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E5%A4%87%E4%BB%BD"><span class="toc-number">17.</span> <span class="toc-text">面试题：MySQL数据库分库分表备份</span></a></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-shell-4" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Shell-4
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2021/09/04/shell-4/" class="article-date">
	  <time datetime="2021-09-04T12:34:53.000Z" itemprop="datePublished">2021-09-04</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/Linux-Shell/" rel="tag">Linux Shell</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
		<span id="busuanzi_value_page_pv">0</span>
	    <!-- <span id="busuanzi_container_page_pv">
			
		</span> -->
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/09/04/shell-4/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 7.8k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 31(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="Shell好用的工具：-cut"><a href="#Shell好用的工具：-cut" class="headerlink" title="Shell好用的工具： cut"></a>Shell好用的工具： cut</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p><code>cut</code>  译为“剪切, 切割”  ,  是一个强大文本处理工具，它可以将文本按列进行划分的文本处理。cut命令逐行读入文本，然后按列划分字段并进行提取、输出等操作。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut [options]  filename</span><br></pre></td></tr></table></figure>

<p>options参数说明</p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-f 提取范围</td>
<td>列号，获取第几列</td>
</tr>
<tr>
<td>-d 自定义分隔符</td>
<td>自定义分隔符，默认为制表符。</td>
</tr>
<tr>
<td>-c 提取范围</td>
<td>以字符为单位进行分割</td>
</tr>
<tr>
<td>-b 提取范围</td>
<td>以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。</td>
</tr>
<tr>
<td>-n</td>
<td>与“-b”选项连用，不分割多字节字符；</td>
</tr>
</tbody></table>
<p>提取范围说明</p>
<table>
<thead>
<tr>
<th>提取范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>n-</td>
<td>提取指定第n列或字符或字节后面所有数据</td>
</tr>
<tr>
<td>n-m</td>
<td>提取指定第n列或字符或字节到第m列或字符或字节中间的所有数据</td>
</tr>
<tr>
<td>-m</td>
<td>提取指定第m列或字符或字节前面所有数据</td>
</tr>
<tr>
<td>n1,n2,…</td>
<td>提前指定枚举列的所有数据</td>
</tr>
</tbody></table>
<h2 id="示例：切割提取指定列数据"><a href="#示例：切割提取指定列数据" class="headerlink" title="示例：切割提取指定列数据"></a>示例：切割提取指定列数据</h2><p>cut1.txt文件数据准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch cut1.txt</span><br></pre></td></tr></table></figure>

<p>编辑文件添加内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AA  itheima 11 XX</span><br><span class="line">BB  itcast 22 XXX</span><br><span class="line">CC  Shell 33 XXXX</span><br><span class="line">DD  it 44 XXXXXXX</span><br></pre></td></tr></table></figure>

<p>提取文件中第一列数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut cut1.txt -d &quot; &quot; -f 1</span><br></pre></td></tr></table></figure>

<p><img src="https://file.coderstudy.cn/image/Pic/image-20200707230710596.png" alt="image-20200707230710596"></p>
<p>提取文件中第一列,第三列, 枚举查找</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut cut1.txt -d &quot; &quot; -f 1,3</span><br></pre></td></tr></table></figure>

<p><img src="https://file.coderstudy.cn/image/Pic/image-20200707232926482.png" alt="image-20200707232926482"></p>
<p>提取文件中第二列,第三列,第四列, 范围查找</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200707233024564.png" alt="image-20200707233024564"></p>
<p>提取文件中第一列后面所有列的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut cut1.txt -d &quot; &quot;  -f 2- </span><br></pre></td></tr></table></figure>

<p><img src="https://file.coderstudy.cn/image/Pic/image-20200709220852618.png" alt="image-20200709220852618"></p>
<p>提起文件中结束列前面所有列的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cut -d &quot; &quot; -f -2 cut1.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> -2 提取指定列前面所有列数据</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711142437017.png" alt="image-20200711142437017"></p>
<h2 id="示例-切割提取指定字符数据"><a href="#示例-切割提取指定字符数据" class="headerlink" title="示例: 切割提取指定字符数据"></a>示例: 切割提取指定字符数据</h2><p>提取每行前3个字符</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut cut1.txt -c1-3</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711142653293.png" alt="image-20200711142653293"></p>
<p>提取每行第4个字符以后的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut cut1.txt -c 4-</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711143324756.png" alt="image-20200711143324756"></p>
<p>提取每行第3个字符前面所有字符</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut cut1.txt -c -3</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711143438631.png" alt="image-20200711143438631"></p>
<h2 id="示例：切割提取指定字节数据"><a href="#示例：切割提取指定字节数据" class="headerlink" title="示例：切割提取指定字节数据"></a>示例：切割提取指定字节数据</h2><p>提取字符串”abc传智播客” 前3个字节</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;abc传智播客&quot; | cut -b -3</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711143706340.png" alt="image-20200711143706340"></p>
<p>提取字符串”abc传智播客” 前4个字节</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;abc传智播客&quot; | cut -b -4</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711143754196.png" alt="image-20200711143754196"></p>
<p>提取字符串”abc传智播客” 前6个字节</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;abc传智播客&quot; | cut -b -6</span><br><span class="line"><span class="meta">#</span><span class="bash"> 由于linux系统默认utf-8码表, 所以一个汉字占3个字节</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711143926461.png" alt="image-20200711143926461"></p>
<p>提取字符串”abc传智播客” 前4个字节, 就可以将汉字 “传”输出,</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;abc传智播客&quot; | cut -nb -4</span><br><span class="line"><span class="meta">#</span><span class="bash">  -n 取消多字节字符分割直接输出</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711144139142.png" alt="image-20200711144139142"></p>
<h2 id="示例：切割提取指定单词数据"><a href="#示例：切割提取指定单词数据" class="headerlink" title="示例：切割提取指定单词数据"></a>示例：切割提取指定单词数据</h2><p>在cut1.txt文件中切割出”itheima”</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat cut1.txt | grep itheima | cut -d &quot; &quot; -f 2</span><br></pre></td></tr></table></figure>

<p><img src="https://file.coderstudy.cn/image/Pic/image-20200708003059162.png" alt="image-20200708003059162"></p>
<h2 id="示例：切割提取bash进程的PID号"><a href="#示例：切割提取bash进程的PID号" class="headerlink" title="示例：切割提取bash进程的PID号"></a>示例：切割提取bash进程的PID号</h2><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux | grep &#x27;bash&#x27; | head -n 1 | cut -d &quot; &quot; -f 8</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711120636232.png" alt="image-20200711120636232"></p>
<h2 id="示例：切割提取IP地址"><a href="#示例：切割提取IP地址" class="headerlink" title="示例：切割提取IP地址"></a>示例：切割提取IP地址</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig | grep broadcast | cut -d &quot; &quot; -f 10</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711115310554.png" alt="image-20200711115310554"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>cut的作用</p>
<blockquote>
<p>一个强大文本处理工具，它可以将文本按列进行划分的文本处理。cut命令逐行读入文本，然后按列划分字段并进行提取、输出等操作。</p>
</blockquote>
<p>cut切割提取列</p>
<blockquote>
<p><code>cut  文件或数据 -d 分隔符切割 -f 提取第X列 </code></p>
</blockquote>
<p>cut切割提取字符</p>
<blockquote>
<p><code>cut  文件或数据 -c 提取字符范围 </code></p>
</blockquote>
<p>cut切割提取字节</p>
<blockquote>
<p><code>cut  文件或数据 -nb 提取直接范围 </code></p>
</blockquote>
<h1 id="Shell好用的工具：sed"><a href="#Shell好用的工具：sed" class="headerlink" title="Shell好用的工具：sed"></a>Shell好用的工具：sed</h1><h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>使用sed编辑文件替换文件中的单词</p>
<p>编写在文件中插入或修改行的sed程序</p>
<p>使用sed作为过滤器来过滤管道数据命令</p>
<h2 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h2><p>sed （stream editor, 流编辑器） 是Linux下一款功能强大的非交互流式文本编辑器(vim是交互式文本编辑器)，可以对文本文件的每一行数据匹配查询之后进行增、删、改、查等操作，支持按行、按字段、按正则匹配文本内容，灵活方便，特别适合于大文件的编辑.</p>
<p>sed是一种流编辑器，它一次处理一行内容,  将这行放入缓存(存区空间称为：模式空间)，然后才对这行进行处理，处理完后，将缓存区的内容发送到终端。</p>
<h2 id="sed处理数据原理"><a href="#sed处理数据原理" class="headerlink" title="sed处理数据原理"></a>sed处理数据原理</h2><p><img src="https://file.coderstudy.cn/image/Pic/image-20200711095515087.png" alt="image-20200711095515087"></p>
<h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed [选项参数] [模式匹配/sed程序命令] [文件名]</span><br><span class="line"></span><br><span class="line"># 模式匹配,sed会读取每一行数据到模式空间中, 之后判断当前行是否符合模式匹配要求,符合要求就会</span><br><span class="line">#     执行sed程序命令, 否则不会执行sed程序命令;如果不写匹配模式,那么每一行都会执行sex程序命令</span><br></pre></td></tr></table></figure>

<p>选项参数说明</p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>-e</code></td>
<td>直接在指令列模式上进行sed的动作编辑。它告诉sed将下一个参数解释为一个sed指令，只有当命令行上给出多个sed指令时才需要使用-e选项;一行命令语句可以执行多条sed命令</td>
</tr>
<tr>
<td><code>-i</code></td>
<td>直接对内容进行修改，不加-i时默认只是预览，不会对文件做实际修改</td>
</tr>
<tr>
<td><code>-f</code></td>
<td>后跟保存了sed指令的文件</td>
</tr>
<tr>
<td><code>-n</code></td>
<td>取消默认输出，sed默认会输出所有文本内容，使用-n参数后只显示处理过的行</td>
</tr>
<tr>
<td><code>-r ruguler              </code></td>
<td>使用扩展正则表达式，默认情况sed只识别基本正则表达式 *</td>
</tr>
</tbody></table>
<p>sed程序命令功能描述</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>a</code></td>
<td>add新增，a的后面可以接字串，在下一行出现</td>
</tr>
<tr>
<td><code>c</code></td>
<td>change更改, 更改匹配行的内容</td>
</tr>
<tr>
<td>d</td>
<td>delete删除, 删除匹配的内容</td>
</tr>
<tr>
<td><code>i</code></td>
<td>insert插入, 向匹配行前插入内容</td>
</tr>
<tr>
<td><code>p</code></td>
<td>print打印, 打印出匹配的内容，通常与-n选项和用</td>
</tr>
<tr>
<td>s</td>
<td>substitute替换, 替换掉匹配的内容</td>
</tr>
<tr>
<td><code>=</code></td>
<td>用来打印被匹配的行的行号</td>
</tr>
<tr>
<td><code>n</code></td>
<td>读取下一行，遇到n时会自动跳入下一行</td>
</tr>
</tbody></table>
<p>特殊符号</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>!</code></td>
<td>就像一个sed命令，放在限制条件后面, 对指定行以外的所有行应用命令(取反)</td>
</tr>
<tr>
<td>{sed命令1;sed命令2}</td>
<td>多个命令操作同一个的行</td>
</tr>
</tbody></table>
<h2 id="数据准备"><a href="#数据准备" class="headerlink" title="数据准备"></a>数据准备</h2><p>sed.txt文件内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ABC</span><br><span class="line">itheima itheima</span><br><span class="line">itcast</span><br><span class="line">123</span><br><span class="line">itheima</span><br></pre></td></tr></table></figure>



<h2 id="示例：向文件中添加数据"><a href="#示例：向文件中添加数据" class="headerlink" title="示例：向文件中添加数据"></a>示例：向文件中添加数据</h2><h3 id="演示1-指定行号的前或后面添加数据"><a href="#演示1-指定行号的前或后面添加数据" class="headerlink" title="演示1: 指定行号的前或后面添加数据"></a>演示1: 指定行号的前或后面添加数据</h3><p>向第三行后面添加hello</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;3ahello&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3 , 代表第三行</p>
<p>a,  代表在后面添加, 出现在下一行</p>
<p>注意这里没有修改源文件</p>
</blockquote>
<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710000018446.png" alt="image-20200710000018446"></p>
<p>向第三行前面添加hello</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;3ihello&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3 , 代表第三行</p>
<p>i,  代表在前面添加, 出现在上一行</p>
<p>注意这里没有修改源文件</p>
</blockquote>
<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710000824539.png" alt="image-20200710000824539"></p>
<h3 id="演示2-指定内容前或后面添加数据"><a href="#演示2-指定内容前或后面添加数据" class="headerlink" title="演示2: 指定内容前或后面添加数据"></a>演示2: 指定内容前或后面添加数据</h3><p>向内容 <code>itheima</code> 后面添加 <code>hello</code> ，如果文件中有多行包括 ``itheima<code> </code>，则每一行后面都会添加</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;/itheima/ahello&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710000117275.png" alt="image-20200710000117275"></p>
<p>向内容 <code>itheima</code> 前面添加 <code>hello</code> ，如果文件中有多行包括 ``itheima<code> </code>，则每一行前面都会添加</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;/itheima/ihello&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710001012028.png" alt="image-20200710001012028"></p>
<h3 id="演示3-在最后一行前或后添加hello"><a href="#演示3-在最后一行前或后添加hello" class="headerlink" title="演示3: 在最后一行前或后添加hello"></a>演示3: 在最后一行前或后添加hello</h3><p>在最后一行后面添加hello</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;$ahello&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<blockquote>
<p>$a:  最后一行后面添加</p>
</blockquote>
<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710000330765.png" alt="image-20200710000330765"></p>
<p>在最后一行前面添加hello</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;$ihello&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<blockquote>
<p>$i:  最后一行前面添加</p>
</blockquote>
<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710001219163.png" alt="image-20200710001219163"></p>
<h2 id="示例-删除文件中的数据"><a href="#示例-删除文件中的数据" class="headerlink" title="示例: 删除文件中的数据"></a>示例: 删除文件中的数据</h2><h3 id="演示1-删除第2行"><a href="#演示1-删除第2行" class="headerlink" title="演示1: 删除第2行"></a>演示1: 删除第2行</h3><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed  &#x27;2d&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> d 用于删除</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2d 删除第2行</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710165604688.png" alt="image-20200710165604688"></p>
<p>命令: 删除第1行,第4行数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1d;4d&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711112046339.png" alt="image-20200711112046339"></p>
<h3 id="演示2-删除奇数行"><a href="#演示2-删除奇数行" class="headerlink" title="演示2: 删除奇数行"></a>演示2: 删除奇数行</h3><p>从第一行开始删除，每隔2行就删掉一行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1~2d&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1~2 从第1行开始, 每隔2行</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710170036140.png" alt="image-20200710170036140"></p>
<h3 id="演示3-删除指定范围的多行数据"><a href="#演示3-删除指定范围的多行数据" class="headerlink" title="演示3:  删除指定范围的多行数据"></a>演示3:  删除指定范围的多行数据</h3><p>删除从第1行到第3行的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1,3d&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1,3  从指定第1行开始到第3行结束</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710170338110.png" alt="image-20200710170338110"></p>
<h3 id="演示3-删除指定范围取反的多行数据"><a href="#演示3-删除指定范围取反的多行数据" class="headerlink" title="演示3:  删除指定范围取反的多行数据"></a>演示3:  删除指定范围取反的多行数据</h3><p>删除从第1行到第3行取反的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1,3!d&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1,3! 从指定第1行开始到第3行结束取反, 就是不在这个范围的行</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710171410645.png" alt="image-20200710171410645"></p>
<h3 id="演示4-删除最后一行"><a href="#演示4-删除最后一行" class="headerlink" title="演示4: 删除最后一行"></a>演示4: 删除最后一行</h3><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed  &#x27;$d&#x27;   sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710173137962.png" alt="image-20200710173137962"></p>
<h3 id="演示5-删除匹配itheima的行"><a href="#演示5-删除匹配itheima的行" class="headerlink" title="演示5: 删除匹配itheima的行"></a>演示5: 删除匹配itheima的行</h3><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;/itheima/d&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710173601573.png" alt="image-20200710173601573"></p>
<h3 id="演示6-删除匹配行到最后一行"><a href="#演示6-删除匹配行到最后一行" class="headerlink" title="演示6: 删除匹配行到最后一行"></a>演示6: 删除匹配行到最后一行</h3><p>删除匹配itheima行到最后一行 , 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;/itheima/,$d&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> , 代表范围匹配</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710174149348.png" alt="image-20200710174149348"></p>
<h3 id="演示7-删除匹配行及其后面一行"><a href="#演示7-删除匹配行及其后面一行" class="headerlink" title="演示7: 删除匹配行及其后面一行"></a>演示7: 删除匹配行及其后面一行</h3><p>删除匹配itheima行及其后面一行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;/itheima/,+1d&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710174655691.png" alt="image-20200710174655691"></p>
<h3 id="演示9-删除不匹配的行"><a href="#演示9-删除不匹配的行" class="headerlink" title="演示9: 删除不匹配的行"></a>演示9: 删除不匹配的行</h3><p>删除不匹配 <code>itheima</code> 或 <code>itcast</code> 的行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;/itheima\|itcast/!d&#x27; sed.txt</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> \| 是正则表达式的或者 这里|需要转义, 所以为\|</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ! 取反</span></span><br></pre></td></tr></table></figure>



<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711105205862.png" alt="image-20200711105205862"></p>
<h2 id="示例：更改文件中的数据"><a href="#示例：更改文件中的数据" class="headerlink" title="示例：更改文件中的数据"></a>示例：更改文件中的数据</h2><h3 id="演示1-将文件的第一行修改为hello"><a href="#演示1-将文件的第一行修改为hello" class="headerlink" title="演示1:将文件的第一行修改为hello"></a>演示1:将文件的第一行修改为hello</h3><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed  &#x27;1chello&#x27;  sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710110433788.png" alt="image-20200710110433788"></p>
<h3 id="演示2-将包含itheima的行修改为hello"><a href="#演示2-将包含itheima的行修改为hello" class="headerlink" title="演示2: 将包含itheima的行修改为hello"></a>演示2: 将包含itheima的行修改为hello</h3><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed  &#x27;/itheima/chello&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710110651523.png" alt="image-20200710110651523"></p>
<h3 id="演示3-将最后一行修改为hello"><a href="#演示3-将最后一行修改为hello" class="headerlink" title="演示3: 将最后一行修改为hello"></a>演示3: 将最后一行修改为hello</h3><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;$chello&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710111014651.png" alt="image-20200710111014651"></p>
<h3 id="演示4-将文件中的itheima替换为hello"><a href="#演示4-将文件中的itheima替换为hello" class="headerlink" title="演示4: 将文件中的itheima替换为hello"></a>演示4: 将文件中的itheima替换为hello</h3><p>将文件中的itheima替换为hello,默认只替换每行第一个itheima</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/itheima/hello/&#x27;  sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710154359291.png" alt="image-20200710154359291"></p>
<blockquote>
<p>注意 <code>&#39;s/itheima/hello/&#39;</code>  最后一个<code>/</code> 不可少</p>
</blockquote>
<p>将文本中所有的itheima都替换为hello, 全局替换</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/itheima/hello/g&#x27;  sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> g 代表匹配全局所有符合的字符</span></span><br></pre></td></tr></table></figure>

<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710154642832.png" alt="image-20200710154642832"></p>
<h3 id="演示5-将每行中第二个匹配替换"><a href="#演示5-将每行中第二个匹配替换" class="headerlink" title="演示5: 将每行中第二个匹配替换"></a>演示5: 将每行中第二个匹配替换</h3><p>将每行中第二个匹配的itheima替换为hello 命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/itheima/hello/2&#x27;   sex.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710154829235.png" alt="image-20200710154829235"></p>
<h3 id="演示6-替换后的内容写入文件"><a href="#演示6-替换后的内容写入文件" class="headerlink" title="演示6: 替换后的内容写入文件"></a>演示6: 替换后的内容写入文件</h3><p>将每行中第二个匹配的itheima替换为hello ,  将替换后的内容写入到sed2.txt文件中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 第一种方式</span></span><br><span class="line">sed -n &#x27;s/itheima/hello/2pw sed2.txt&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> w写入</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> p打印, -n只是获取</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 第二种方式</span></span><br><span class="line">sed -n &#x27;s/itheima/hello/2p &#x27; sed.txt &gt; sed2.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710161127555.png" alt="image-20200710161127555"></p>
<h3 id="演示7-正则表达式匹配替换"><a href="#演示7-正则表达式匹配替换" class="headerlink" title="演示7: 正则表达式匹配替换"></a>演示7: 正则表达式匹配替换</h3><p>匹配有 <code>i</code> 的行，替换匹配行中 <code>t</code> 后的所有内容为空 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;/i/s/t.*//g&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> /t.*/ 表示逗号后的所又内容</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710162013813.png" alt="image-20200710162013813"></p>
<h3 id="演示8-每行末尾拼接test"><a href="#演示8-每行末尾拼接test" class="headerlink" title="演示8: 每行末尾拼接test"></a>演示8: 每行末尾拼接test</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/$/&amp; test&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> &amp; 用于拼接</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200710164435499.png" alt="image-20200710164435499"></p>
<h3 id="演示9-每行行首添加注释"><a href="#演示9-每行行首添加注释" class="headerlink" title="演示9: 每行行首添加注释 #"></a>演示9: 每行行首添加注释 <code>#</code></h3><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s/^/#/&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711111533278.png" alt="image-20200711111533278"></p>
<h2 id="示例-查询文件或管道中的数据"><a href="#示例-查询文件或管道中的数据" class="headerlink" title="示例: 查询文件或管道中的数据"></a>示例: 查询文件或管道中的数据</h2><h3 id="需求1-查询含有-itcast-的行数据"><a href="#需求1-查询含有-itcast-的行数据" class="headerlink" title="需求1: 查询含有  itcast  的行数据"></a>需求1: 查询含有  <code>itcast</code>  的行数据</h3><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/itcast/p&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711113348831.png" alt="image-20200711113348831"></p>
<h3 id="需求2-管道过滤查询"><a href="#需求2-管道过滤查询" class="headerlink" title="需求2: 管道过滤查询"></a>需求2: 管道过滤查询</h3><p>管道查询所有进程中含有sshd的进程信息命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux | sed -n &#x27;/sshd/p&#x27;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711113226364.png" alt="image-20200711113226364"></p>
<h2 id="示例-多个sed程序命令执行"><a href="#示例-多个sed程序命令执行" class="headerlink" title="示例: 多个sed程序命令执行"></a>示例: 多个sed程序命令执行</h2><p>将sed.txt文件中的第1行删除并将 <code>itheima</code> 替换为 <code>itcast</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 第一种方式, 多个sed程序命令 在每个命令之前使用 -e 参数</span></span><br><span class="line">sed -e &#x27;1d&#x27; -e &#x27;s/itheima/itcast/g&#x27; sed.txt </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 第二种方式</span></span><br><span class="line">sed  &#x27;1d;s/itheima/itcast/g&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711105707546.png" alt="image-20200711105707546"></p>
<h2 id="sed高级用法-缓存区数据交换"><a href="#sed高级用法-缓存区数据交换" class="headerlink" title="sed高级用法: 缓存区数据交换"></a>sed高级用法: 缓存区数据交换</h2><h3 id="模式空间与暂存空间介绍"><a href="#模式空间与暂存空间介绍" class="headerlink" title="模式空间与暂存空间介绍"></a>模式空间与暂存空间介绍</h3><ol>
<li><p>首先需要明白, sed处理文件是逐行处理的, 即<strong>读取一行处理一行,输出一行</strong>;</p>
</li>
<li><p>sed把文件读出来每一行存放的空间叫模式空间, 会在该空间中对读到的内容做相应处理;</p>
</li>
<li><p>此外sed还有一个额外的空间即暂存空间, 暂存空间刚开始里边只有个空行, 记住这一点;</p>
</li>
<li><p>sed可使用相应的命令从模式空间往暂存空间放入内容或从暂存空间取内容放入模式空间;</p>
<blockquote>
<p>2个缓存空间传输数据的目的是为了更好的处理数据, 一会参考案例学习  </p>
</blockquote>
</li>
</ol>
<h3 id="关于缓存区sed程度命令"><a href="#关于缓存区sed程度命令" class="headerlink" title="关于缓存区sed程度命令"></a>关于缓存区sed程度命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>h</td>
<td>将<strong>模式空间</strong>里面的内容复制到<strong>暂存空间</strong>缓存区(覆盖方式)</td>
</tr>
<tr>
<td>H</td>
<td>将<strong>模式空间</strong>里面的内容复制到<strong>暂存空间</strong>缓存区(追加方式)</td>
</tr>
<tr>
<td>g</td>
<td>将<strong>暂存空间</strong>里面的内容复制到<strong>模式空间</strong>缓存区(覆盖方式)</td>
</tr>
<tr>
<td>G</td>
<td>将<strong>暂存空间</strong>里面的内容复制到<strong>模式空间</strong>缓存区(追加方式)</td>
</tr>
<tr>
<td>x</td>
<td>交换2个空间的内容</td>
</tr>
</tbody></table>
<h2 id="示例-缓存空间数据交换"><a href="#示例-缓存空间数据交换" class="headerlink" title="示例: 缓存空间数据交换"></a>示例: 缓存空间数据交换</h2><h3 id="演示1-第一行粘贴到最后1行"><a href="#演示1-第一行粘贴到最后1行" class="headerlink" title="演示1: 第一行粘贴到最后1行"></a>演示1: 第一行粘贴到最后1行</h3><p>将模式空间第一行复制到暂存空间(覆盖方式),并将暂存空间的内容复制到模式空间中的最后一行(追加方式)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1h;$G&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1h 从模式空间中将第一行数据复制到暂存空间(覆盖方式)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="variable">$G</span> 将暂存空间中的内容复制到模式空间中最后一行(追加方式)</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711103556835.png" alt="image-20200711103556835"></p>
<h3 id="演示2-第一行删除后粘贴到最后1行"><a href="#演示2-第一行删除后粘贴到最后1行" class="headerlink" title="演示2: 第一行删除后粘贴到最后1行"></a>演示2: 第一行删除后粘贴到最后1行</h3><p>将模式空间第一行复制到暂存空间(覆盖方式)并删除, 最后将暂存空间的内容复制到模式空间中的最后一行(追加方式)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1&#123;h;d&#125;;$G&#x27; sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1&#123;h;d&#125;对模式空间中的第一行数据同时进行复制到暂存空间(覆盖方式)和删除模式空间中的第一行数据</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711103901519.png" alt="image-20200711103901519"></p>
<h3 id="演示3-第一行数据复制粘贴替换其他行数据"><a href="#演示3-第一行数据复制粘贴替换其他行数据" class="headerlink" title="演示3: 第一行数据复制粘贴替换其他行数据"></a>演示3: 第一行数据复制粘贴替换其他行数据</h3><p>将模式空间第一行复制到暂存空间(覆盖方式), 最后将暂存空间的内容复制到模式空间中替换从第2行开始到最后一行的每一行数据(覆盖方式)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1h;2,$g&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行命令</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711104451987.png" alt="image-20200711104451987"></p>
<h3 id="演示4-将前3行数据数据复制粘贴到最后一行"><a href="#演示4-将前3行数据数据复制粘贴到最后一行" class="headerlink" title="演示4: 将前3行数据数据复制粘贴到最后一行"></a>演示4: 将前3行数据数据复制粘贴到最后一行</h3><p>将前3行数据复制到暂存空间(追加方式), 之后将暂存空间的所有内容复制粘贴到模式空间最后一行(追加方式)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1,3H;$G&#x27; sed.txt</span><br></pre></td></tr></table></figure>



<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711104856968.png" alt="image-20200711104856968"></p>
<h2 id="示例-给每一行添加空行"><a href="#示例-给每一行添加空行" class="headerlink" title="示例: 给每一行添加空行"></a>示例: 给每一行添加空行</h2><p>插入空行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed G -i sed.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> G 每行后面添加一个空行</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -i 修改源文件</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711095724616.png" alt="image-20200711095724616"></p>
<h2 id="示例-删除所有的空行"><a href="#示例-删除所有的空行" class="headerlink" title="示例: 删除所有的空行"></a>示例: 删除所有的空行</h2><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;/^$/d&#x27; sed.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711095844232.png" alt="image-20200711095844232"></p>
<h1 id="Shell好用的工具：awk"><a href="#Shell好用的工具：awk" class="headerlink" title="Shell好用的工具：awk"></a>Shell好用的工具：awk</h1><h2 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h2><p>awk是一个强大的文本分析工具，相对于grep的查找，sed的编辑，awk在其对数据分析并生成报告时,显得尤为强大简单来说awk就是把文件逐行的读入，以空格为默认分隔符将每行切片，切开的部分再进行各种分析处理, 因为切开的部分使用awk可以定义变量,运算符, 使用流程控制语句进行深度加工与分析。</p>
<blockquote>
<p>创始人 Alfred V. <strong>A</strong>ho、Peter J. <strong>W</strong>einberger和Brian W. <strong>K</strong>ernighan  awk由来是姓氏的首字母</p>
</blockquote>
<h2 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk [options] &#x27;pattern&#123;action&#125;&#x27; &#123;filenames&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>pattern：表示AWK在数据中查找的内容，就是匹配模式</p>
<p>action：在找到匹配内容时所执行的一系列命令</p>
</blockquote>
<p>选项参数说明</p>
<table>
<thead>
<tr>
<th>选项参数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-F</td>
<td>指定输入文件拆分分隔符</td>
</tr>
<tr>
<td>-v</td>
<td>赋值一个用户定义变量</td>
</tr>
</tbody></table>
<h2 id="awk内置变量"><a href="#awk内置变量" class="headerlink" title="awk内置变量"></a>awk内置变量</h2><table>
<thead>
<tr>
<th>内置变量</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>ARGC</td>
<td>命令行参数个数</td>
</tr>
<tr>
<td>ARGV</td>
<td>命令行参数排列</td>
</tr>
<tr>
<td>ENVIRON</td>
<td>支持队列中系统环境变量的使用</td>
</tr>
<tr>
<td>FILENAME</td>
<td>awk浏览的文件名</td>
</tr>
<tr>
<td>FNR</td>
<td>浏览文件的记录数</td>
</tr>
<tr>
<td>FS</td>
<td>设置输入域分隔符，等价于命令行 -F选项</td>
</tr>
<tr>
<td>NF</td>
<td>浏览记录的域的个数, 根据分隔符分割后的列数</td>
</tr>
<tr>
<td>NR</td>
<td>已读的记录数, 也是行号</td>
</tr>
<tr>
<td>OFS</td>
<td>输出域分隔符</td>
</tr>
<tr>
<td>ORS</td>
<td>输出记录分隔符</td>
</tr>
<tr>
<td>RS</td>
<td>控制记录分隔符</td>
</tr>
<tr>
<td><code>$n</code></td>
<td><code>$0</code>变量是指整条记录。<code>$1</code>表示当前行的第一个域,<code>$2</code>表示当前行的第二个域,……以此类推。</td>
</tr>
<tr>
<td>$NF</td>
<td>$NF是number finally,表示最后一列的信息，跟变量NF是有区别的，变量NF统计的是每行列的总数</td>
</tr>
</tbody></table>
<h2 id="数据准备-1"><a href="#数据准备-1" class="headerlink" title="数据准备"></a>数据准备</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/passwd ./</span><br></pre></td></tr></table></figure>



<h2 id="示例-默认每行空格切割数据"><a href="#示例-默认每行空格切割数据" class="headerlink" title="示例 : 默认每行空格切割数据"></a>示例 : 默认每行空格切割数据</h2><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;abc 123 456&quot; | awk &#x27;&#123;print $1&quot;&amp;&quot;$2&quot;&amp;&quot;$3&#125;&#x27;</span><br></pre></td></tr></table></figure>



<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200712145458252.png" alt="image-20200712145458252"></p>
<h2 id="示例-打印含有匹配信息的行"><a href="#示例-打印含有匹配信息的行" class="headerlink" title="示例: 打印含有匹配信息的行"></a>示例: 打印含有匹配信息的行</h2><p>搜索passwd文件有root关键字的所有行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/root/&#x27; passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&#x27;/root/&#x27;</span> 是查找匹配模式, 没有action命令, 默认输出所有符合的行数据</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711163917949.png" alt="image-20200711163917949"></p>
<h2 id="示例-打印匹配行中第7列数据"><a href="#示例-打印匹配行中第7列数据" class="headerlink" title="示例: 打印匹配行中第7列数据"></a>示例: 打印匹配行中第7列数据</h2><p>搜索passwd文件有root关键字的所有行, 然后以”:”拆分并打印输出第7列</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;/root/&#123;print $7&#125;&#x27; passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"> -F: 以<span class="string">&#x27;:&#x27;</span>分隔符拆分每一个列(域)数据</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711164512294.png" alt="image-20200711164512294"></p>
<h2 id="示例-打印文件每行属性信息"><a href="#示例-打印文件每行属性信息" class="headerlink" title="示例: 打印文件每行属性信息"></a>示例: 打印文件每行属性信息</h2><p>统计passwd:  文件名，每行的行号，每行的列数，对应的完整行内容:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;print &quot;文件名:&quot; FILENAME &quot;,行号:&quot; NR &quot;,列数:&quot; NF &quot;,内容:&quot; $0&#125;&#x27; passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&quot;文件名:&quot;</span> 用于拼接字符串</span></span><br></pre></td></tr></table></figure>



<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711165433352.png" alt="image-20200711165433352"></p>
<p>使用printf替代print,可以让代码阅读型更好</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;printf(&quot;文件名:%5s,行号:%2s, 列数:%1s, 内容:%2s\n&quot;,FILENAME,NR,NF,$O)&#125;&#x27; passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">printf</span>(格式字符串,变量1,变量2,...)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 格式字符串: %ns 输出字符串,n 是数字，指代输出几个字符, n不指定自动占长度</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 格式字符串: %ni 输出整数,n 是数字，指代输出几个数字</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 格式字符串: %m.nf 输出浮点数,m 和 n 是数字，指代输出的整数位数和小数位数。如 %8.2f 代表共输出 8 位数，其中 2 位是小数，6 位是整数；</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711170720468.png" alt="image-20200711170720468"></p>
<h2 id="示例-打印第二行信息"><a href="#示例-打印第二行信息" class="headerlink" title="示例: 打印第二行信息"></a>示例: 打印第二行信息</h2><p>打印/etc/passwd/的第二行信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; &#x27;NR==2&#123;printf(&quot;filename:%s,%s\n&quot;,FILENAME,$0)&#125;&#x27; passwd</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711171311183.png" alt="image-20200711171311183"></p>
<h2 id="示例-查找以c开头的资源"><a href="#示例-查找以c开头的资源" class="headerlink" title="示例: 查找以c开头的资源"></a>示例: 查找以c开头的资源</h2><p>awk过滤的使用,  查找当前目录下文件名以c开头的文件列表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -a | awk &#x27;/^c/&#x27;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711171918200.png" alt="image-20200711171918200"></p>
<h2 id="示例-打印第一列"><a href="#示例-打印第一列" class="headerlink" title="示例: 打印第一列"></a>示例: 打印第一列</h2><p>按照”:” 分割查询第一列打印输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; &#x27;&#123;print $1&#125;&#x27; passwd</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711172121503.png" alt="image-20200711172121503"></p>
<h2 id="示例-打印最后1列"><a href="#示例-打印最后1列" class="headerlink" title="示例: 打印最后1列"></a>示例: 打印最后1列</h2><p>按照”:” 分割查询最后一列打印输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;&#123;print $NF&#125;&#x27; passwd</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711172417497.png" alt="image-20200711172417497"></p>
<h2 id="示例-打印倒数第二列"><a href="#示例-打印倒数第二列" class="headerlink" title="示例: 打印倒数第二列"></a>示例: 打印倒数第二列</h2><p>按照”:” 分割查询倒数第二列打印输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;&#123;print $(NF-1)&#125;&#x27; passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"> $(NF-N) N是几, 就是倒数第几列</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711173518580.png" alt="image-20200711173518580"></p>
<h2 id="示例-打印10到20行的第一列"><a href="#示例-打印10到20行的第一列" class="headerlink" title="示例: 打印10到20行的第一列"></a>示例: 打印10到20行的第一列</h2><p>获取第10到20行的第一列的信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;&#123;if(NR&gt;=10 &amp;&amp; NR&lt;=20) print $1&#125;&#x27; passwd</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711173734821.png" alt="image-20200711173734821"></p>
<h2 id="示例-多分隔符使用"><a href="#示例-多分隔符使用" class="headerlink" title="示例: 多分隔符使用"></a>示例: 多分隔符使用</h2><p>“one:two/three”字符串按照多个分隔符”:”或者”/“ 分割, 并打印分割后每个列数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;one:two/three&quot; | awk -F &#x27;[:/]&#x27; &#x27;&#123;printf(&quot;%s\n%s\n%s\n%s\n&quot;,$0,$1,$2,$3)&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711174827654.png" alt="image-20200711174827654"></p>
<h2 id="示例-添加开始与结束内容"><a href="#示例-添加开始与结束内容" class="headerlink" title="示例: 添加开始与结束内容"></a>示例: 添加开始与结束内容</h2><p>给数据添加开始与结束</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo -e  &quot;abc\nabc&quot; | awk &#x27;BEGIN&#123;print &quot;开始...&quot;&#125; &#123;print $0&#125; END&#123;print &quot;结束...&quot;&#125;&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> BEGIN 在所有数据读取行之前执行；END 在所有数据执行之后执行。</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711181845642.png" alt="image-20200711181845642"></p>
<h2 id="示例-使用循环拼接分割后的字符串"><a href="#示例-使用循环拼接分割后的字符串" class="headerlink" title="示例 : 使用循环拼接分割后的字符串"></a>示例 : 使用循环拼接分割后的字符串</h2><p>“abc itheima     itcast   21” 使用空格分割后, 通过循环拼接在一起</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;abc itheima     itcast   21&quot; | awk -v str=&quot;&quot; -F &#x27;[ ]+&#x27; &#x27;&#123;for(n=1;n&lt;=NF;n++)&#123; str=str$n&#125; print str &#125;&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v 定义变量</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711213649299.png" alt="image-20200711213649299"></p>
<h2 id="示例-操作指定数字运算"><a href="#示例-操作指定数字运算" class="headerlink" title="示例: 操作指定数字运算"></a>示例: 操作指定数字运算</h2><p>将passwd文件中的用户id增加数值1并输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;2.1&quot; | awk -v i=1 &#x27;&#123;print $0+i&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711215839824.png" alt="image-20200711215839824"></p>
<h2 id="示例-切割ip"><a href="#示例-切割ip" class="headerlink" title="示例: 切割ip"></a>示例: 切割ip</h2><p>切割IP</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig | awk &#x27;/broadcast/&#123;print&#125;&#x27; | awk -F &quot; &quot; &#x27;&#123;print $2&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200711220230406.png" alt="image-20200711220230406"></p>
<h2 id="示例-显示空行行号"><a href="#示例-显示空行行号" class="headerlink" title="示例: 显示空行行号"></a>示例: 显示空行行号</h2><p>查询sed.txt中空行所在的行号</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;G&#x27; sed.txt | awk &#x27;/^$/&#123;print NR&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200712085616584.png" alt="image-20200712085616584"></p>
<h2 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h2><p>grep , sed ,awk , cut 文本字符串操作四剑客的区别</p>
<blockquote>
<p>grep：用于查找匹配的行</p>
<p>cut：  截取数据. 截取某个文件中的列, 重点是按照列分割,  这个命令不适合截取文件中有多个空白字符的字段</p>
<p>sed： 增删改查数据. sed用于在文件中以行来截取数据进行增\删\改\查</p>
<p>awk：截取分析数据.  可以在某个文件中是以竖列来截取分析数据,  如果字段之间含有很多空白字符也可以获取需要的数据, awk是一种语言,可以深入分析文件数据</p>
</blockquote>
<h1 id="Shell好用的工具：sort"><a href="#Shell好用的工具：sort" class="headerlink" title="Shell好用的工具：sort"></a>Shell好用的工具：sort</h1><h2 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h2><p>能够使用sort对字符串升序或降序排序</p>
<p>能够使用sort 对数字升序或降序</p>
<p>能够使用sort 对多列进行排序</p>
<h2 id="介绍-3"><a href="#介绍-3" class="headerlink" title="介绍"></a>介绍</h2><p>sort命令是在Linux里非常有用，它将文件进行排序，并将排序结果标准输出或重定向输出到指定文件。</p>
<h2 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort (options) 参数</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>==-n==</td>
<td>number,依照数值的大小排序</td>
</tr>
<tr>
<td>==-r==</td>
<td>reverse, 以相反的顺序来排序</td>
</tr>
<tr>
<td>==-t 分隔字符==</td>
<td>设置排序时所用的分隔字符, 默认空格是分隔符</td>
</tr>
<tr>
<td>==-k==</td>
<td>指定需要排序的列</td>
</tr>
<tr>
<td>-d</td>
<td>排序时，处理英文字母、数字及空格字符外，忽略其他的字符。</td>
</tr>
<tr>
<td>-f</td>
<td>排序时，将小写字母视为大写字母</td>
</tr>
<tr>
<td>-b</td>
<td>忽略每行前面开始出的空格字符</td>
</tr>
<tr>
<td>==-o 输出文件==</td>
<td>将排序后的结果存入指定的文件</td>
</tr>
<tr>
<td>-u</td>
<td>意味着是唯一的(unique)，输出的结果是去完重了的</td>
</tr>
<tr>
<td>-m</td>
<td>将几个排序好的文件进行合并</td>
</tr>
</tbody></table>
<p>参数：指定待排序的文件列表</p>
<h2 id="数据准备-2"><a href="#数据准备-2" class="headerlink" title="数据准备"></a>数据准备</h2><p>sort.txt文本文件代码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">张三 30  </span><br><span class="line">李四 95  </span><br><span class="line">播仔 85 </span><br><span class="line">播仔 85</span><br><span class="line">播仔 86</span><br><span class="line">AA 85</span><br><span class="line">播妞 100</span><br></pre></td></tr></table></figure>

<h2 id="示例1-数字升序"><a href="#示例1-数字升序" class="headerlink" title="示例1: 数字升序"></a>示例1: 数字升序</h2><p>按照“ ”空格分割后的第2列数字升序排序。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sort -t &quot; &quot; -k2n,2 sort.txt</span><br><span class="line"><span class="meta">#</span><span class="bash"> -t <span class="string">&quot; &quot;</span> 代表使用空格分隔符拆分列</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -k 2n,2 代表根据从第2列开始到第2列结束进行数字升序, 仅对第2列排序</span></span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713012421583.png" alt="image-20200713012421583"></p>
<h2 id="示例2-数字升序去重"><a href="#示例2-数字升序去重" class="headerlink" title="示例2: 数字升序去重"></a>示例2: 数字升序去重</h2><p>先按照“ ”空格分割后的,  然后,按照第2列数字升序排序,  最后对所有列去重</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -t &quot; &quot; -k2n,2 -uk1,2 sort.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713012712536.png" alt="image-20200713012712536"></p>
<blockquote>
<p>注意: 先排序再去重</p>
</blockquote>
<h2 id="示例3-数字升序去重结果保存到文件"><a href="#示例3-数字升序去重结果保存到文件" class="headerlink" title="示例3: 数字升序去重结果保存到文件"></a>示例3: 数字升序去重结果保存到文件</h2><p>命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -t &quot; &quot; -k2n,2 -uk1,2 -o sort2.txt sort.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713012900639.png" alt="image-20200713012900639"></p>
<h2 id="示例4-数字降序去重"><a href="#示例4-数字降序去重" class="headerlink" title="示例4: 数字降序去重"></a>示例4: 数字降序去重</h2><p>先按照“ ”空格分割后的,  然后,按照第2列数字降序排序,  最后对所有列去重</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -t &quot; &quot; -k2nr,2 -uk1,2 sort.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713013216947.png" alt="image-20200713013216947"></p>
<h2 id="示例5-多列排序"><a href="#示例5-多列排序" class="headerlink" title="示例5: 多列排序"></a>示例5: 多列排序</h2><p>数据准备sort3.txt</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">公司A,部门A,3</span><br><span class="line">公司A,部门B,0</span><br><span class="line">公司A,部门C,10</span><br><span class="line">公司A,部门D,9</span><br><span class="line">公司B,部门A,30</span><br><span class="line">公司B,部门B,40</span><br><span class="line">公司B,部门C,43</span><br><span class="line">公司B,部门D,1</span><br><span class="line">公司C,部门A,30</span><br><span class="line">公司C,部门B,9</span><br><span class="line">公司C,部门C,100</span><br><span class="line">公司C,部门D,80</span><br><span class="line">公司C,部门E,60</span><br></pre></td></tr></table></figure>

<p>要求:  以”,”分割先对第一列字符串升序,  再对第3列数字降序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -t &quot;,&quot; -k1,1 -k3nr,3 sort3.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713013821197.png" alt="image-20200713013821197"></p>
<h2 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h2><p>能够使用sort对字符串升序或降序排序</p>
<blockquote>
<p>字符串升序: <code>sort -kstart,end 文件</code></p>
<p>字符串降序: <code>sort -kstartr,end 文件</code></p>
</blockquote>
<p>能够使用sort 对数字升序或降序</p>
<blockquote>
<p>数字升序: <code>sort -kstartn,end 文件</code></p>
<p>数字降序: <code>sort -kstartnr,end 文件</code></p>
</blockquote>
<p>能够使用sort 对多列进行排序</p>
<blockquote>
<p><code>sort -kstart[nr],end  -kstart[nr],end ... 文件</code></p>
</blockquote>
<h1 id="面试题：查空行"><a href="#面试题：查空行" class="headerlink" title="面试题：查空行"></a>面试题：查空行</h1><p>问题：使用Linux命令查询file.txt中空行所在的行号</p>
<p>file1.txt数据准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">itheima itheima</span><br><span class="line"></span><br><span class="line">itcast</span><br><span class="line">123</span><br><span class="line"></span><br><span class="line">itheima</span><br></pre></td></tr></table></figure>



<p>答案：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/^$/&#123;print NR&#125;&#x27; file1.txt</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713081907537.png" alt="image-20200713081907537"></p>
<h1 id="面试题：求一列的和"><a href="#面试题：求一列的和" class="headerlink" title="面试题：求一列的和"></a>面试题：求一列的和</h1><p>问题：有文件file2.txt内容如下:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">张三 40</span><br><span class="line">李四 50</span><br><span class="line">王五 60</span><br></pre></td></tr></table></figure>



<p>使用Linux命令计算第二列的和并输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;sum+=$2&#125; END&#123;print &quot;求和: &quot;sum&#125;&#x27; file2.txt</span><br></pre></td></tr></table></figure>



<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713082237986.png" alt="image-20200713082237986"></p>
<h1 id="面试题：检查文件是否存在"><a href="#面试题：检查文件是否存在" class="headerlink" title="面试题：检查文件是否存在"></a>面试题：检查文件是否存在</h1><p>问题：Shell脚本里如何检查一个文件是否存在？如果不存在该如何处理？</p>
<p>答: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if [ -e /root/file1.txt ]; then  echo &quot;文件存在&quot;; else echo &quot;文件不存在&quot;; fi</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713082603013.png" alt="image-20200713082603013"></p>
<h1 id="面试题：数字排序"><a href="#面试题：数字排序" class="headerlink" title="面试题：数字排序"></a>面试题：数字排序</h1><p>问题：用shell写一个脚本，对文本中无序的一列数字排序</p>
<p>cat file3.txt文件内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">9</span><br><span class="line">8</span><br><span class="line">7</span><br><span class="line">6</span><br><span class="line">5</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">2</span><br><span class="line">10</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>答</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -n file3.txt | awk &#x27;&#123;sum+=$1; print $1&#125; END&#123;print &quot;求和: &quot;sum&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713083045742.png" alt="image-20200713083045742"></p>
<h1 id="面试题：搜索指定目录下文件内容"><a href="#面试题：搜索指定目录下文件内容" class="headerlink" title="面试题：搜索指定目录下文件内容"></a>面试题：搜索指定目录下文件内容</h1><p>问题：请用shell脚本写出查找当前文件夹（/root）下所有的文本文件内容中包含有字符”123”的文件名称?</p>
<p>答:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r &quot;123&quot; /root | cut -d &quot;:&quot; -f 1| sort -u</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713083912322.png" alt="image-20200713083912322"></p>
<h1 id="面试题：批量生成文件名"><a href="#面试题：批量生成文件名" class="headerlink" title="面试题：批量生成文件名"></a>面试题：批量生成文件名</h1><p>问题: 批量生产指定数目的文件,文件名采用”纳秒”命名</p>
<p>答: file4.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">read -t 30 -p &quot;请输入创建文件的数目:&quot; n</span><br><span class="line">test=$(echo $n | sed &#x27;s/[0-9]//g&#x27;) #检测非数字输入</span><br><span class="line">if [ -n &quot;$n&quot; -a -z &quot;$test&quot; ] #检测空输入</span><br><span class="line">then</span><br><span class="line">        for ((i=0;i&lt;$n;i=i+1 ))</span><br><span class="line">        do</span><br><span class="line">                name=$(date +%N)</span><br><span class="line">                [ ! -d ./temp ] &amp;&amp;  mkdir -p ./temp</span><br><span class="line">                touch &quot;./temp/$name&quot;</span><br><span class="line">                echo &quot;创建 $name 成功!&quot;</span><br><span class="line">        done</span><br><span class="line">        else</span><br><span class="line">                echo &quot;创建失败&quot;</span><br><span class="line">                exit 1</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713085107848.png" alt="image-20200713085107848"></p>
<h1 id="面试题：批量改名"><a href="#面试题：批量改名" class="headerlink" title="面试题：批量改名"></a>面试题：批量改名</h1><p>问题: 将/root/temp目录下所有文件名重命名为”旧文件名-递增数字”?</p>
<p>重命名命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename 旧文件名 新文件名 旧文件所在位置</span><br></pre></td></tr></table></figure>

<p>脚本代码file5.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">filenames=$(ls /root/temp)</span><br><span class="line">number=1</span><br><span class="line">for name in $filenames</span><br><span class="line">do</span><br><span class="line">        printf &quot;命令前:%s&quot; $&#123;name&#125;</span><br><span class="line">        newname=$&#123;name&#125;&quot;-&quot;$&#123;number&#125;</span><br><span class="line">        rename $name $&#123;newname&#125; /root/temp/*</span><br><span class="line">        let number++ #每个改名后的文件名后缀数字加1</span><br><span class="line">        printf &quot;重命名后:%s \n&quot; $&#123;newname&#125;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713091236973.png" alt="image-20200713091236973"></p>
<h1 id="面试题：批量创建用户"><a href="#面试题：批量创建用户" class="headerlink" title="面试题：批量创建用户"></a>面试题：批量创建用户</h1><p>问题: 根据users.txt中提供的用户列表,一个名一行, 批量添加用户到linux系统中</p>
<p>已知users.txt数据准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user1</span><br><span class="line">user2</span><br></pre></td></tr></table></figure>



<p>知识点分析1: 添加用户命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd 用户名</span><br></pre></td></tr></table></figure>

<p>知识点分析2: 设置每个用户密码默认密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;123456&quot; | passwd --stdin 用户名</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713092318381.png" alt="image-20200713092318381"></p>
<p>面试题答案: 脚本代码file6.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">ULIST=$(cat /root/users.txt)  ##/root/users.txt  里面存放的是用户名，一个名一行</span><br><span class="line">for UNAME in $ULIST</span><br><span class="line">do</span><br><span class="line">        useradd $UNAME</span><br><span class="line">        echo &quot;123456&quot; | passwd --stdin $UNAME &amp;&gt;/dev/null</span><br><span class="line">        [ $? -eq 0 ] &amp;&amp; echo &quot;$UNAME用户名与密码添加初始化成功!&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713093129265.png" alt="image-20200713093129265"></p>
<h1 id="面试题：筛选单词"><a href="#面试题：筛选单词" class="headerlink" title="面试题：筛选单词"></a>面试题：筛选单词</h1><p>问题: 根据给出的数据输出里面单词长度大于3的单词</p>
<p>数据准备</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I may not be able to change the past, but I can learn from it.</span><br></pre></td></tr></table></figure>

<p>shell脚本file7.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;I may not be able to change the past, but I can learn from it.&quot; | awk -F &quot;[ ,.]&quot; &#x27;&#123;for(i=1;i&lt;NF;i++)&#123; if(length($i)&gt;3)&#123;print $i&#125;&#125;&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713101959074.png" alt="image-20200713101959074"></p>
<h1 id="面试题：单词及字母去重排序"><a href="#面试题：单词及字母去重排序" class="headerlink" title="面试题：单词及字母去重排序"></a>面试题：单词及字母去重排序</h1><p>问题</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、按单词出现频率降序排序！</span><br><span class="line"><span class="number">2</span>、按字母出现频率降序排序！</span><br></pre></td></tr></table></figure>

<p>file8.txt 文件内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No. The Bible says Jesus had compassion2 on them for He saw them as sheep without a shepherd. They were like lost sheep, lost in their sin. How the Lord Jesus loved them! He knew they were helpless and needed a shepherd. And the Good Shepherd knew He had come to help them. But not just the people way back then. For the Lord Jesus knows all about you, and loves you too, and wants to help you.</span><br></pre></td></tr></table></figure>

<p>按照单词出现频率降序</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &quot;[,. ]+&quot; &#x27;&#123;for(i=1;i&lt;=NF;i++)S[$i]++&#125;END&#123;for(key in S)print S[key],key&#125;&#x27; file8.txt |sort -rn|head</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713101616727.png" alt="image-20200713101616727"></p>
<p>按照字符出现频率降序前10个</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &quot;&quot; &#x27;&#123;for(i=1;i&lt;=NF;i++)S[$i]++&#125;END&#123;for(key in S)print S[key],key&#125;&#x27; file8.txt |sort -rn|head</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713101521632.png" alt="image-20200713101521632"></p>
<h1 id="面试题：扫描网络内存活主机"><a href="#面试题：扫描网络内存活主机" class="headerlink" title="面试题：扫描网络内存活主机"></a>面试题：扫描网络内存活主机</h1><p>问题:  扫描192.168.56.1到192.168.56.254之间ip的是否存活, 并输出是否在线?</p>
<p>服务器ip存活分析</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping ip地址 -c 2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果ip地址存活发送2个数据包会至少接收返回1个数据包</span></span><br></pre></td></tr></table></figure>

<p>效果如图</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713021841637.png" alt="image-20200713021841637"></p>
<p>完整脚本代码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">count=0</span><br><span class="line">for i  in 192.168.56.&#123;1..254&#125;</span><br><span class="line">do</span><br><span class="line">    # 使用ping命令发送2个包测试, 并获取返回接收到包的个数</span><br><span class="line">    receive=$(ping $i -c 2|awk &#x27;NR==6&#123;print $4&#125;&#x27;)</span><br><span class="line">    # 接收返回包大于0 说明主机在线</span><br><span class="line">    if [ $&#123;receive&#125; -gt 0 ]</span><br><span class="line">    then</span><br><span class="line">        echo &quot;$&#123;i&#125; 在线&quot;</span><br><span class="line">        ((count+=1))</span><br><span class="line">    else</span><br><span class="line">        echo &quot;$&#123;i&#125; 不在线&quot;</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">done</span><br><span class="line">echo &quot;在线服务器有:&quot;$count&quot;个&quot;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713021609950.png" alt="image-20200713021609950"></p>
<h1 id="面试题：MySQL分库备份"><a href="#面试题：MySQL分库备份" class="headerlink" title="面试题：MySQL分库备份"></a>面试题：MySQL分库备份</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">user=root      #用户名</span><br><span class="line">pass=root      #密码</span><br><span class="line">backfile=/root/mysql/backup #备份路径</span><br><span class="line">[ ! -d $backfile ] &amp;&amp; mkdir -p $backfile #判断是否有备份路径</span><br><span class="line">cmd=&quot;mysql -u$user -p$pass&quot;  #登录数据库</span><br><span class="line">dump=&quot;mysqldump -u$user -p$pass &quot; #mysqldump备份参数</span><br><span class="line">dblist=`$cmd -e &quot;show databases;&quot; 2&gt;/dev/null |sed 1d|egrep -v &quot;_schema|mysql&quot;` #获取库名列表</span><br><span class="line">echo &quot;需要备份的数据列表:&quot;</span><br><span class="line">echo $dblist</span><br><span class="line">echo &quot;开始备份:&quot;</span><br><span class="line">for db_name in $dblist #for循环备份库列表</span><br><span class="line">do</span><br><span class="line"> printf &#x27;正在备份数据库:%s&#x27; $&#123;db_name&#125;</span><br><span class="line"><span class="meta"> $</span><span class="bash">dump <span class="variable">$db_name</span> 2&gt;/dev/null |gzip &gt;<span class="variable">$&#123;backfile&#125;</span>/<span class="variable">$&#123;db_name&#125;</span>_$(date +%m%d).sql.gz <span class="comment">#库名+时间备份打包至指定路径下</span></span></span><br><span class="line"> printf &#x27;,备份完成\n&#x27;</span><br><span class="line">done</span><br><span class="line">echo &quot;全部备份完成!!!&quot;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713032753334.png" alt="image-20200713032753334"></p>
<h1 id="面试题：MySQL数据库分库分表备份"><a href="#面试题：MySQL数据库分库分表备份" class="headerlink" title="面试题：MySQL数据库分库分表备份"></a>面试题：MySQL数据库分库分表备份</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">user=root      #用户名</span><br><span class="line">pass=root      #密码</span><br><span class="line">backfile=/root/mysql/backup #备份路径</span><br><span class="line">[ ! -d $backfile ] &amp;&amp; mkdir -p $backfile #判断是否有备份路径</span><br><span class="line">cmd=&quot;mysql -u$user -p$pass&quot;  #登录数据库</span><br><span class="line">dump=&quot;mysqldump -u$user -p$pass &quot; #mysqldump备份参数</span><br><span class="line">dblist=`$cmd -e &quot;show databases;&quot; 2&gt;/dev/null |sed 1d|egrep -v &quot;_schema|mysql&quot;` #获取库名列表</span><br><span class="line">echo &quot;需要备份的数据列表:&quot;</span><br><span class="line">echo $dblist</span><br><span class="line">echo &quot;开始备份:&quot;</span><br><span class="line">for db_name in $dblist #for循环备份库列表</span><br><span class="line">do</span><br><span class="line"> printf &#x27;正在备份数据库:%s\n&#x27; $&#123;db_name&#125;</span><br><span class="line"> tables=`mysql -u$user -p&quot;$pass&quot; -e &quot;use $db_name;show tables;&quot; 2&gt;/dev/null|sed 1d`</span><br><span class="line"> for j in $tables</span><br><span class="line">  do</span><br><span class="line">    printf &#x27;正在备份数据库 %s 表 %s &#x27; $&#123;db_name&#125; $&#123;j&#125;</span><br><span class="line">    $dump -B --databases $db_name --tables $j 2&gt;/dev/null &gt; $&#123;backfile&#125;/$&#123;db_name&#125;-$&#123;j&#125;-`date +%m%d`.sql</span><br><span class="line">    printf &#x27;,备份完成\n&#x27;</span><br><span class="line">  done</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> printf &#x27;数据库 %s 备份完成\n&#x27; $&#123;db_name&#125;</span><br><span class="line">done</span><br><span class="line">echo &quot;全部备份完成!!!&quot;</span><br></pre></td></tr></table></figure>

<p>运行效果</p>
<p><img src="https://file.coderstudy.cn/image/Pic/image-20200713032458346.png" alt="image-20200713032458346"></p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://liujun1997.github.io/2021/09/04/shell-4/" title="Shell-4" target="_blank" rel="external">http://liujun1997.github.io/2021/09/04/shell-4/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/liujun1997" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar1.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/liujun1997" target="_blank"><span class="text-dark">Escher</span><small class="ml-1x">Java,Python,Coder</small></a></h3>
        <div>二线城市苦逼搬砖码农</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2021/10/11/Linux%E7%A3%81%E7%9B%98-%E5%88%86%E5%8C%BA-%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/" title="Linux磁盘/分区/文件系统"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2021/09/04/Shell-3/" title="Shell-3"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
    
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/liujun1997" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="http://weibo.com/流隽jk" target="_blank" title="Weibo" data-toggle=tooltip data-placement=top><i class="icon icon-weibo"></i></a></li>
        
        <li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle=tooltip data-placement=top><i class="icon icon-twitter"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

        <div class="copyright">
            
                &copy; 2021
                    Escher
                        

                            <div class="publishby">
                                <span>点击<span id="busuanzi_value_site_pv" style="font-family:Courier"></span>次,</span>
                                <span>访客<span id="busuanzi_value_site_uv" style="font-family:Courier"></span>人</span>
                                </br>
                                <span id="sitetime"></span>
                            </div>
        </div>
</footer>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
           year - 作为date对象的年份，为4位年份值
           month - 0-11之间的整数，做为date对象的月份
           day - 1-31之间的整数，做为date对象的天数
           hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
           minutes - 0-59之间的整数，做为date对象的分钟数
           seconds - 0-59之间的整数，做为date对象的秒数
           microseconds - 0-999之间的整数，做为date对象的毫秒数
        */
        var t1 = Date.UTC(2021, 08, 06, 21, 20, 52); //t1为建站时间
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        var y = diffYears.toString()
        var d = diffDays.toString().padStart(3, '0')
        var h = diffHours.toString().padStart(2, '0')
        var m = diffMinutes.toString().padStart(2, '0')
        var s = diffSeconds.toString().padStart(2, '0')
        document.getElementById("sitetime").innerHTML = "已运行" + y + " 年 " + d + "天" + h + "小时" + m + "分钟" + s + "秒";
    }
    siteTime();
</script>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  var requiredFields = 'mail';
  requiredFields = requiredFields.split(',');
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: true,
    appId: 'vJnnArHG3ubHciKWAy9BJP9e-MdYXbMMI',
    appKey: 'q8YnuMuBOJHdFrXYNVBUCFLC',
    placeholder: '留下邮箱才可以收到新消息提醒哦',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false,
    requiredFields: requiredFields,
    enableQQ: 'true',
    recordIP: 'true'
  });
  </script>

     



  <script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script>
  <script>
  //利用 FancyBox 实现点击图片放大
  $(document).ready(function() {
    $('article img').not('[hidden]').not('.panel-body img').each(function() {
      var $image = $(this);
      var imageCaption = $image.attr('alt');
      var $imageWrapLink = $image.parent('a');
      if ($imageWrapLink.length < 1) {
        var src = this.getAttribute('src');
        var idx = src.lastIndexOf('?');
        if (idx != -1) {
          src = src.substring(0, idx);
        }
        $imageWrapLink = $image.wrap('<a href="' + src + '"></a>').parent('a');
      }
      $imageWrapLink.attr('data-fancybox', 'images');
      if (imageCaption) {
        $imageWrapLink.attr('data-caption', imageCaption);
      }
    });
    $().fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
    });
  });
  </script>






<div id="go-top"></div>
<div id="go-bottom"></div>
<style type="text/css">
#go-top {
 width:40px;height:40px;
 background-color:#DDA0DD;
 position:relative;
 border-radius:20px;
 position:fixed;right:10px;bottom:60px;
 cursor:pointer;display:none;
}
#go-top:after {
 content:" ";
 position:absolute;left:14px;top:14px;
 border-top:2px solid #fff;border-right:2px solid #fff;
 width:12px;height:12px;
 transform:rotate(-45deg);
}
#go-top:hover {
 background-color:#8A2BE2;
}

#go-bottom {
 width:40px;height:40px;
 background-color:#DDA0DD;
 position:relative;
 border-radius:20px;
 position:fixed;right:60px;bottom:60px;
 cursor:pointer;display:none;
}
#go-bottom:after {
 content:" ";
 position:absolute;left:14px;top:14px;
 border-top:2px solid #fff;border-right:2px solid #fff;
 width:12px;height:12px;
 transform:rotate(135deg);
}
#go-bottom:hover {
 background-color:#8A2BE2;
}

</style>
<script>
$(function () {
  var top=$("#go-top");
  var totalHegiht =  document.body.scrollHeight

  $(window).scroll(function () {
    ($(window).scrollTop() > 300) ? top.show(300) : top.hide(200);
    $("#go-top").click(function () {
      $('body,html').animate({scrollTop:0});
      return false();
    })
  });
});

$(function () {
  var bottom=$("#go-bottom");
  var totalHegiht =  document.body.scrollHeight
  $(window).scroll(function () {
    ($(window).scrollTop() < 300) ? bottom.show(300) : bottom.hide(200);
    $("#go-bottom").click(function () {
      $('body,html').animate({scrollTop:totalHegiht});
      return false();
    })
  });
});
</script>

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 11px;
      font-weight: 500;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      background-color: #eee;
      background-image: linear-gradient(#fcfcfc, #eee);
      border: 1px solid #d5d5d5;
      border-radius: 3px;
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      right: 4px;
      top: 2px;
      z-index: 2;
    }

    .highlight-wrap:hover .copy-btn,
        .highlight-wrap .copy-btn:focus {
      opacity: 1
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  
  <script>
    addLoadEvent(()=>{
      $('.highlight').each(function (i, e) {
        var $wrap = $('<div>').addClass('highlight-wrap')
        $(e).after($wrap)
        $wrap.append($('<button>').addClass('copy-btn').append('一键复制').on('click', function (e) {
          var code = $(this).parent().find(".code")[0].innerText
          
          var ta = document.createElement('textarea')
          document.body.appendChild(ta)
          ta.style.position = 'absolute'
          ta.style.top = '0px'
          ta.style.left = '0px'
          ta.value = code
          ta.select()
          ta.focus()
          var result = document.execCommand('copy')
          document.body.removeChild(ta)
          
            if(result)$(this).text('复制成功')
            else $(this).text('复制失败')
          
          $(this).blur()
        })).on('mouseleave', function (e) {
          var $b = $(this).find('.copy-btn')
          setTimeout(function () {
            $b.text('一键复制')
          }, 300)
        }).append(e)
      })
    })
  </script>


</body>

</html>